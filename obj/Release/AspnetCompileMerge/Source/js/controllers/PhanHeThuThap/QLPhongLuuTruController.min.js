angular.module("WebApiApp").controller("QLPhongLuuTruController",["$rootScope","$scope","$http","$cookies","$uibModal","$settings",function(n,t,i){t.Paging={searchKey:"",pageSize:15,totalCount:0,totalPage:0,currentPage:1};t.filter={PageNumber:t.Paging.currentPage,PageSize:t.Paging.pageSize};var r={"delete":"api/quanly/phongluutru/del",getdata:"api/quanly/phongluutru/get",search:"api/quanly/phongluutru/search",getloaiphong:"api/dmloaiphong/get",getdonviluunop:"api/DMDonViNopLuu/Get",getnhomvbchuyeu:"api/DMNhomVBChuYeu/Get"},u=function(){i({method:"GET",url:r.getloaiphong+"?pageNumber=1&pageSize=999&searchKey="}).then(function(n){t.DMLoaiPhong=n.data.data},function(){toastr.warning("Có lỗi trong quá trình tải dữ liệu!","Thông báo")});t.cancelModal=function(){$uibModalInstance.dismiss("close")}};u();t.DataHeader=[{Name:"Phông số",Key:"PhongSo"},{Name:"Tên phông",Key:"TenPhongLuuTru"},{Name:"Loại phông",Key:"LoaiPhongTen"},{Name:"Ngày tạo phông",Key:"NgayTaoPhong"}];t.Del=function(t){confirm("Bạn có chắc chắn muốn xóa ?")&&i({method:"GET",url:r.delete+"/"+t}).then(function(){toastr.success("Xóa dữ liệu thành công !","Thông báo");n.LoadData()},function(){toastr.error("Có lỗi trong quá trình xóa dữ liệu !","Thông báo")})};n.LoadData=function(){i({method:"POST",url:r.search,data:t.filter}).then(function(i){t.DataItems=i.data.data;t.Paging.totalCount=i.data.totalCount;t.Paging.pageStart=i.data.pageStart;t.Paging.totalPage=i.data.totalPage;$("#displayPage").html("Trang "+t.Paging.currentPage+"/"+t.Paging.totalPage);$("#show_paginator").bootpag({total:t.Paging.totalPage,page:t.Paging.currentPage,maxVisible:10}).on("page",function(i,r){t.Paging.currentPage=r;n.LoadData();r===null&&(r=1)})},function(){toastr.warning("Có lỗi trong quá trình tải dữ liệu!","Thông báo")})};t.LoadData();t.$on("$viewContentLoaded",function(){ComponentsSelect2.init()});t.onCancel=function(){t.filter={}};t.onSearch=function(){n.LoadData()}}]);